{% extends "base.html" %}

{% block title %}{{ username }}'s Profile{% endblock %}

{% block content %}
<h1>Hello, {{ username }}!</h1>

<h2>Active Sessions</h2>
{% if sessions.len() > 0 %}
<table>
    <thead>
        <tr>
            <th>Device/Browser</th>
            <th>IP Address</th>
            <th>Created</th>
            <th>Expires</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for session in sessions %}
        <tr{% if session.is_current %} data-theme="primary"{% endif %}>
            <td>{{ session.user_agent }}</td>
            <td>{{ session.ip_address }}</td>
            <td>{{ session.created_at }}</td>
            <td>{{ session.expires_at }}</td>
            <td>
                {% if session.is_current %}
                <small>Current session</small>
                {% else %}
                <button 
                    hx-delete="/sessions/{{ session.id }}"
                    hx-target="closest tr"
                    hx-swap="outerHTML swap:1s"
                    hx-confirm="Are you sure you want to revoke this session?"
                    data-theme="outline" 
                    role="button">
                    Revoke
                </button>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p>No active sessions found.</p>
{% endif %}
{% endblock %}
